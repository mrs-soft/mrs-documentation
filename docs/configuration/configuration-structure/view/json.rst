JSON
====

JSON --- это базовое состояние представления, которое задаётся прикладным программистом.

JSON-файл создаётся в папке с представлением и именуется по следующему принципу::
    
    наименование_представления.json

Например::

    calendar_view.json

..  thumbnail:: images/json-1-naming-example.png
    :alt: Пример наименования
    :width: 50%
    :class: framed

Структура JSON
--------------

..  code-block:: json

    {
        "name": "...",
    	"title": "...",
    	"class": "...",
    	"settings": {
            "folderEmpty": "...",
    		"emptyList": {
    			"nothingFound": {
    				"text": "...",
    				"subtitle": "..."
    			},
    			"nothingSelected": {
    				"text": "...",
    				"subtitle": "..."
    			}
    		}
    	},
    	"isArchived": false,
    	"forCreate": {
    		"type": "formInstance",
    		"formId": "..."
    	},
    	"sqlField": null,
    	"relationsData": [],
    }

Верхний уровень
+++++++++++++++

..  code-block:: json

    {
        "name": "...",
    	"title": "...",
    	"class": "...",
    	"settings": { "...": "..." },
    	"isArchived": false,
    	"forCreate": { "...": "..." },
    	"sqlField": null,
    	"relationsData": [],
    }

..  list-table::
    :widths: 10 80 10
    :header-rows: 1
    :align: left

    *   - Поле
        - Определение
        - Тип данных
    *   - ``name``
        - Название представление, которое будет отображаться использоваться в исходниках конфигурации.
          Необходимо, чтобы это название совпадало с папкой, в которой находится это представление.
        - **string**
    *   - ``title``
        - Название представления, которое будет отображаться в клиенте.
        - **string**
    *   - ``class``
        - Тип представления. От значения этого поля зависит то, с каким представлением вы будете работать.
        - **string**
    *   - ``settings``
        - Дополнительные настройки для представления. В некоторых случаях это поле можно оставить пустым.
        - **array of objects**
    *   - ``isArchived``
        - Параметр, который показывает архивировано (удалено) представление или нет.
        - **boolean**
    *   - ``forCreate``
        - Параметры, которые заполняются, если представление создаётся на основе экземпляров форм.
        - **array of objects**
    *   - ``sqlField``
        - Вместо заполнения файла query, вы можете написать запрос на чистом SQL в этом поле.
        - **string**
    *   - ``relationsData``
        - Поле заполняется автоматически с помощью настроенных бизнес-правил.
          Это поле необходимо для работы представления в мобильном приложении.
        - **array of objects**

Settings
++++++++

Дополнительные настройки для представления. В некоторых случаях это поле можно оставить пустым.

..  code-block:: json

    { 	"settings": {
            "folderEmpty": "...",
    		"emptyList": {
    			"nothingFound": {
    				"text": "...",
    				"subtitle": "..."
    			},
    			"nothingSelected": {
    				"text": "...",
    				"subtitle": "..."
    			}
    		}
    	}
    }

..  list-table::
    :widths: 10 80 10
    :header-rows: 1
    :align: left

    *   - Поле
        - Определение
        - Тип данных
    *   - ``folderEmpty``
        - Настройка, которая работает для древовидных представлений.
          В этом поле записывается текст, который отображется в случае, если родительский элемент пустой.
        - **string**
    *   - ``emptyList``
        - Дополнительная настройка для работы с представлением, в котором не отображено ни одного экземпляра формы.
        - **array of objects**
    *   - ``nothingFound``
        - Параметры, которые выводятся, если в представлении не отобразилось ни одного экземпляра формы.
          Работает в случае если экземпляров форм нет вообще или выбранные фильтры не сработали.
        - **array of objects**
    *   - ``text``
        - Заголовок текста, который отобразится при срабатывании параметра ``nothingFound``.
        - **string**
    *   - ``subtitle``
        - Подзаголовок текста, который отобразится при срабатывании параметра ``nothingFound``.
        - **string**
    *   - ``nothingSelected``
        - Параметры, которые выводятся, если после срабатывания фильтров из бокового меню (сайдбара)
          не отобразилось ни одного экземпляра формы.
        - **array of objects**
    *   - ``text``
        - Заголовок текста, который отобразится при срабатывании параметра ``nothingSelected``.
        - **string**
    *   - ``subtitle``
        - Подзаголовок текста, который отобразится при срабатывании параметра ``nothingSelected``.
        - **string**

forCreate
+++++++++

Параметры, которые заполняются, если представление создаётся на основе экземпляров форм.
Если предсталвение создаётся на основе справочника, то параметры не заполняются и поле ``forCreate`` имеет значение null.

..  code-block:: json

    "forCreate": {
    	"type": "formInstance",
    	"formId": "..."
    }

..  list-table::
    :widths: 10 80 10
    :header-rows: 1
    :align: left

    *   - Поле
        - Определение
        - Тип данных
    *   - ``type``
        - В этом поле записывается ``"formInstance"``. Для создания представления
          из справочника этот блок заполнять не нужно вообще.
        - **string**
    *   - ``formId``
        - В этом поле указывает идентификатор формы, на основе которой необходимо создать представление.
        - **string**