Связи
=====

Антология
---------

Сущность контекста (Context Entity)
+++++++++++++++++++++++++++++++++++

*   id (Идентификатор сущности)
*   type (Тип сущности. Отображает принадлежность к тому или иному контексту)
*   childOf (Список исходящих связей типа CHILD_OF)
*   parent  (Список исходящих связей типа PARENT)
*   hasAttachment  (Список исходящих связей типа HAS_ATTACHMENT)
*   assignedTo  (Список исходящих связей типа ASSIGNED_TO)
*   owner  (Список исходящих связей типа OWNER)
*   relatedTo  (Список исходящих связей типа RELATED_TO)
*   incomingParent (Список входящих связей типа PARENT)
*   incomingHasAttachment (Список входящих связей типа HAS_ATTACHMENT)
*   incomingAssignedTo (Список входящих связей типа ASSIGNED_TO)
*   incomingOwner (Список входящих связей типа OWNER)
*   incomingRelatedTo (Список входящих связей типа RELATED_TO)

Связь (Relation)
++++++++++++++++

Является объектом на уровне графовой базы Neo4j.

*   id (Идентификатор связи на уровне Neo4j)
*   start (Узел в neo4j, из которого выходит связь)
*   end (Узел в neo4j, в который входит связь)
*   relationId (Идентификатор связи, который задаётся клиентским приложеним,
    необходимо для подготовки клиент-серверного взаимодействия к оффлайн режиму работы)
*   relationType (Тип данной связи)
*   archived (При попытке удаления связи путём запросов к контексту связей происходит её архивация)
*   payload (Произвольные данные в json формате, хранящиеся внутри связи)

Типы связей (Relation types)
++++++++++++++++++++++++++++

На данный момент имеются следующие типы связей:

*   ASSIGNED_TO - связь, отображающая назначение пользователя на произвольную сущность
*   CHILD_OF - связь, отображающая принадлежность объекта некоему объекту на уровень выше.
    На данный момент актуальна только для УС, планируется её удаление и переход к связи PARENT
*   PARENT - связь, отображающая отношение “является родителем” между двумя сущностями
*   OWNER - связь между пользователем и произвольной сущностью, отражающая факт владения пользователем данной сущностью.
    В основном используется для отображения того факта, что пользователь является создателем данной сущности
*   RELATED_TO - связь, обозначающая произвольное отношение между двумя сущностями.
    Используется в том случае, когда нам не важно в каком отношении находятся сущности, но необходима связь между ним                                                                                                                                                                                                                                                                                                                                                  и
*   HAS_ATTACHMENT - связь между неким аттачментом и произвольной сущностью в системе. По большей степени актуальна для УС

Связь ASSIGNED_TO
+++++++++++++++++

Помимо стандартных атрибутов связи имеет поле roles (Список идентификаторов ролей пользователя).
Данное поле используется для реализации Графовых прав.

Типы прав
`````````

*   Access (проверяется на графе) — возможность принципиального доступа до сущности
    Например, если есть доступ, то вся сущность грузится в оффлайн-хранилище или к ней может пройти запрос или команда;
*   Permissions (проверяются с помощью хуков или ABAC-движка) — возможность выполнить команду или произвести чтение;