:orphan:

Отображение представления --- viewDisplay
=========================================

Определение
-----------

Компонент используется для отображения представлений в форме.

Тип компонента в конфигураторе: **viewDisplay**.

Внешний вид
-----------

JSON-схема для создания компонента в конфигураторе:

..  code-block:: json

    "testViewDisplay": {
        "type": "viewDisplay",
        "title": "Отметки на [List] Custom form with params with reports",
        "fields": ["id","title"],
        "viewId": "627cd801a5608901a8000433",
        "variables": {"pickerId": ""}
    }

.. Как оно выглядит в пользовательском приложении:

.. ..  thumbnail:: images/view-1-overview.png
..     :alt: Пример компонента
..     :width: 70%

.. Выбор формы на основе прописанного представления:

.. ..  thumbnail:: images/view-2-choosing.png
..     :alt: Пример компонента
..     :width: 70%

Свойства
--------

..  code-block:: json

    "type": "viewDisplay",
    "title": "Название компонента",
    "description": "Описание",
    "viewId": "...",
    "fields": [ "..." ],
    "variables": [
        {
          [ "..." ]
        }
      ],
    "hidden": false,
    "helperText": "..."
    }   

..  list-table::
    :header-rows: 1

    *   - Свойство
        - Определение
        - Тип данных
    *   - ``type``
        - Тип элемента. Для этого компонента --- это всегда ``viewDisplay``.
        - **string**
    *   - ``title``
        - Название компонента, которое отображается в форме.
        - **string**
    *   - ``description``
        - Описание компонента, которое отображается в окне выбора значений.
        - **string**
    *   - ``viewId``
        - ID представления, которую нужно отображать в списке.
        - **string**
    *   - ``variables``
        - Ассоциативный массив с данными для шаблонизации Query выбранного представления.
          Если это поле заполнено, то эти данные должны быть отображены и в query-запросе представления.
        - **array of objects**
    *   - ``hidden``
        - Это стандартное свойство для всех компонентов.
          При установке значения ``true`` для этого свойства, компонент будет скрыт из формы.
          Это свойство помогает выстраивать логику для работы с полями.
          То есть с помощью хуков есть возможность изменить значение этого свойства в определённых ситуациях.
          Либо использовать данные из этого поля в других местах, но так, чтобы конечный пользователь не видел этого.
        - **boolean**
    *   - ``helperText``
        - Описание поля. Это стандартное свойство и отображается как текст под полем компонента.
        - **string**

Модель данных
-------------

Данные сохраняются в ``FormInstances`` в поле ``Data`` в виде JSON.

Заполненная форма в пользовательском приложении:

..  thumbnail:: images/dictionary-3-model.png
    :alt: Пример компонента
    :width: 70%

После сохранения данные попадают в ``FromInstances`` в конфигураторе. Они сохраняются также в JSON формате:

..  code-block:: json

    "documents": [
    {
        "id": "63e3378f00209b40be79aa99",
        "url": "documents/b2c7cc4f-76fc-4bbc-a0be-97c433752e25/Invoice-01.2022.pdf",
        "name": "Invoice-01.2022.pdf",
        "size": 21024,
        "type": "document",
        "status": "UPLOADED",
        "createdDate": 1675835279502,
        "originalFileName": "Invoice-01.2022.pdf"
    }
    ]

В ``FormInstances`` попадают все данные о документе.

..Примеры использования
..---------------------